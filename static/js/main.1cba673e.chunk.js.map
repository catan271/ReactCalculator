{"version":3,"sources":["index.js"],"names":["buttons","defaultValues","calculated","current","dotted","display","actionCreator","index","type","value","store","createStore","state","Object","assign","action","slice","length","test","ans","MathJS","eval","Math","pow","Number","parseFloat","toFixed","Button","props","handleClick","bind","handleKeyPress","dispatch","this","document","addEventListener","event","keyCode","id","onClick","React","Component","Display","values","DisplayContainer","connect","send","Calculator","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1cba673e.chunk.js","sourcesContent":["import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport './index.css';\r\nimport {createStore} from \"redux\";\r\nimport {Provider, connect} from \"react-redux\";\r\nimport MathJS from \"math-expression-evaluator\";\r\n\r\nconst buttons = [\r\n    ['number', '0', 'zero', 96],\r\n    ['number', '1', 'one', 97],\r\n    ['number', '2', 'two', 98],\r\n    ['number', '3', 'three', 99],\r\n    ['number', '4', 'four', 100],\r\n    ['number', '5', 'five', 101],\r\n    ['number', '6', 'six', 102],\r\n    ['number', '7', 'seven', 103],\r\n    ['number', '8', 'eight', 104],\r\n    ['number', '9', 'nine', 105],\r\n    ['dot', '.', 'decimal', 110],\r\n    ['operator', '+', 'add', 107],\r\n    ['operator', '-', 'subtract', 109],\r\n    ['operator', '*', 'multiply', 106],\r\n    ['operator', '/', 'divide', 111],\r\n    ['clear', 'AC', 'clear', 32],\r\n    ['delete', 'DEL', 'delete', 8],\r\n    ['equals', '=', 'equals', 13]\r\n]\r\n\r\n//redux\r\nconst MAX_LENGTH = 12;\r\n\r\nconst defaultValues = {\r\n    calculated: false,\r\n    current: '0',\r\n    dotted: false,\r\n    display: '0'\r\n};\r\n\r\nconst actionCreator = (index) => ({\r\n    type: buttons[index][0],\r\n    value: buttons[index][1]\r\n});\r\n\r\nconst Reducer = (state = Object.assign({}, defaultValues), action) => {\r\n    switch (action.type) {\r\n        case 'number':\r\n            if (state.calculated) state = Object.assign({}, defaultValues);\r\n            if (action.value == '0' && state.current=='0') return state;\r\n            if (state.current == '0') return Object.assign({}, state, {\r\n                current: action.value,\r\n                display: state.display.slice(0, -1) + action.value,});\r\n            if (state.current.length < MAX_LENGTH) return Object.assign({}, state, {\r\n                current: state.current + action.value,\r\n                display: state.display + action.value});\r\n            else return state;\r\n        case 'delete':\r\n            if (state.calculated) state = Object.assign({}, defaultValues);\r\n            return Object.assign({}, state, {\r\n                current: state.current.slice(0, -1),\r\n                display: state.display.slice(0, -1)});\r\n        case 'dot':\r\n            if (state.calculated) state = Object.assign({}, defaultValues);\r\n            if (!state.dotted) return Object.assign({}, state, {\r\n                current: state.current + action.value,\r\n                display: state.display + action.value,\r\n                dotted: true});\r\n            else return state;\r\n        case 'clear':\r\n            return Object.assign({}, defaultValues);\r\n        case 'operator':\r\n            if (state.calculated) {\r\n                state.display = state.current;\r\n                state.calculated = false;\r\n            }\r\n            if (/\\W{2}/.test(state.display.slice(-2))) state.display = state.display.slice(0,-2);\r\n            if (action.value != '-') if(/[+*/-]/.test(state.display.slice(-1))) state.display = state.display.slice(0,-1);\r\n            return Object.assign({}, state,{\r\n                current: '',\r\n                display: state.display + action.value,\r\n                dotted: false\r\n            });\r\n        case 'equals':\r\n            let ans = MathJS.eval(state.display);\r\n            if (ans < Math.pow(10, 20)) ans = Number.parseFloat(ans.toFixed(10));\r\n            return Object.assign({}, state, {\r\n                current: '' + ans,\r\n                display: state.display + '=' + ans,\r\n                calculated: true\r\n            })\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst store = createStore(Reducer);\r\n\r\n//React\r\nclass Button extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    }\r\n    handleClick() {\r\n        store.dispatch(actionCreator(this.props.index));\r\n    }\r\n    componentDidMount() {\r\n        document.addEventListener(\"keydown\", this.handleKeyPress);\r\n    }\r\n    handleKeyPress(event) {\r\n        if (event.keyCode == buttons[this.props.index][3]) this.handleClick();\r\n    }\r\n    render() {\r\n        return (\r\n            <button id={buttons[this.props.index][2]} onClick={this.handleClick}>\r\n                {buttons[this.props.index][1]}\r\n            </button>\r\n        );\r\n    }\r\n}\r\n\r\nclass Display extends React.Component {\r\n    render() {\r\n        return(\r\n            <div id={\"screen\"}>\r\n                <div id={\"formula\"}>{this.props.values.display}</div>\r\n                <div id={\"display\"}>{this.props.values.current}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n//react-redux\r\nconst mapStateToProps = (state) =>  {return {values: Object.assign({}, state)}};\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {send: (index) => {dispatch(actionCreator(index))}};\r\n}\r\n\r\nconst DisplayContainer = connect(mapStateToProps, mapDispatchToProps)(Display);\r\n\r\nclass Calculator extends React.Component {\r\n    render() {\r\n        return (\r\n            <div id={\"calculator\"}>\r\n                CATAN'S CALCULATOR\r\n                <Provider store={store}>\r\n                    <DisplayContainer/>\r\n                </Provider>\r\n                <div id={'buttons'}>\r\n                    <div>\r\n                        <Button index={15}/>\r\n                        <Button index={16}/>\r\n                        <Button index={17}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={7}/>\r\n                        <Button index={8}/>\r\n                        <Button index={9}/>\r\n                        <Button index={11}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={4}/>\r\n                        <Button index={5}/>\r\n                        <Button index={6}/>\r\n                        <Button index={12}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={1}/>\r\n                        <Button index={2}/>\r\n                        <Button index={3}/>\r\n                        <Button index={13}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={0}/>\r\n                        <Button index={10}/>\r\n                        <Button index={14}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    <Calculator/>,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}