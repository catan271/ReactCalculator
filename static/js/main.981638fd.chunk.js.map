{"version":3,"sources":["index.js"],"names":["buttons","defaultValues","calculated","current","dotted","display","Reducer","state","action","type","value","slice","length","test","ans","MathJS","eval","Math","pow","Number","parseFloat","toFixed","StateContext","React","createContext","DispatchContext","Provider","children","useReducer","dispatch","Button","props","useContext","handleKeyPress","event","keyCode","index","handleClick","useEffect","document","addEventListener","removeEventListener","id","onClick","Display","Calculator","ReactDom","render","getElementById"],"mappings":"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","file":"static/js/main.981638fd.chunk.js","sourcesContent":["import React, {useEffect, useContext, useReducer} from 'react'\r\nimport './index.css'\r\nimport MathJS from \"math-expression-evaluator\"\r\nimport ReactDom from 'react-dom'\r\n\r\nconst buttons = [\r\n    ['number', '0', 'zero', 96],\r\n    ['number', '1', 'one', 97],\r\n    ['number', '2', 'two', 98],\r\n    ['number', '3', 'three', 99],\r\n    ['number', '4', 'four', 100],\r\n    ['number', '5', 'five', 101],\r\n    ['number', '6', 'six', 102],\r\n    ['number', '7', 'seven', 103],\r\n    ['number', '8', 'eight', 104],\r\n    ['number', '9', 'nine', 105],\r\n    ['dot', '.', 'decimal', 110],\r\n    ['operator', '+', 'add', 107],\r\n    ['operator', '-', 'subtract', 109],\r\n    ['operator', '*', 'multiply', 106],\r\n    ['operator', '/', 'divide', 111],\r\n    ['clear', 'AC', 'clear', 32],\r\n    ['delete', 'DEL', 'delete', 8],\r\n    ['equals', '=', 'equals', 13]\r\n]\r\n\r\nconst MAX_LENGTH = 12\r\n\r\nconst defaultValues = {\r\n    calculated: false,\r\n    current: '0',\r\n    dotted: false,\r\n    display: '0'\r\n}\r\n\r\nconst Reducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'number':\r\n            if (state.calculated) state = {...defaultValues}\r\n            if (action.value === '0' && state.current ==='0') return state;\r\n            if (state.current === '0') return {...state, \r\n                current: action.value,\r\n                display: state.display.slice(0, -1) + action.value}\r\n            if (state.current.length < MAX_LENGTH) return {...state,\r\n                current: state.current + action.value,\r\n                display: state.display + action.value}\r\n            else return state;\r\n        case 'delete':\r\n            if (state.calculated) state = {...defaultValues}\r\n            return {...state,\r\n                current: state.current.slice(0, -1),\r\n                display: state.display.slice(0, -1)}\r\n        case 'dot':\r\n            if (state.calculated) state = {...defaultValues}\r\n            if (!state.dotted) return {...state,\r\n                current: state.current + action.value,\r\n                display: state.display + action.value,\r\n                dotted: true}\r\n            else return state;\r\n        case 'clear':\r\n            return {...defaultValues}\r\n        case 'operator':\r\n            if (state.calculated) {\r\n                state.display = state.current;\r\n                state.calculated = false;\r\n            }\r\n            if (/\\W{2}/.test(state.display.slice(-2))) state.display = state.display.slice(0,-2);\r\n            if (action.value !== '-') if(/[+*/-]/.test(state.display.slice(-1))) state.display = state.display.slice(0,-1);\r\n            return {...state,\r\n                current: '',\r\n                display: state.display + action.value,\r\n                dotted: false\r\n            }\r\n        case 'equals':\r\n            let ans = MathJS.eval(state.display);\r\n            if (ans < Math.pow(10, 20)) ans = Number.parseFloat(ans.toFixed(10));\r\n            return {...state,\r\n                current: '' + ans,\r\n                display: state.display + '=' + ans,\r\n                calculated: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst StateContext = React.createContext()\r\nconst DispatchContext = React.createContext()\r\n\r\nfunction Provider({children}) {\r\n    const [state, dispatch] = useReducer(Reducer, {...defaultValues})\r\n\r\n    return (\r\n        <StateContext.Provider value={state}>\r\n            <DispatchContext.Provider value={dispatch}>\r\n                {children}\r\n            </DispatchContext.Provider>\r\n        </StateContext.Provider>\r\n    )\r\n}\r\n\r\nfunction Button(props) {\r\n    const dispatch = useContext(DispatchContext)\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', handleKeyPress)\r\n        return () => {document.removeEventListener('keydown', handleKeyPress)}\r\n    })\r\n\r\n    function handleKeyPress(event) {\r\n        if (event.keyCode === buttons[props.index][3]) handleClick();\r\n    }\r\n\r\n    function handleClick() {\r\n        dispatch({\r\n            type: buttons[props.index][0],\r\n            value: buttons[props.index][1]\r\n        })\r\n    }\r\n    return (\r\n        <button id={buttons[props.index][2]} onClick={handleClick}>{buttons[props.index][1]}</button>\r\n    )\r\n}\r\n\r\nfunction Display() {\r\n    const state = useContext(StateContext)\r\n\r\n    return (\r\n        <div id={\"screen\"}>\r\n            <div id={\"formula\"}>{state.display}</div>\r\n            <div id={\"display\"}>{state.current}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Calculator() {\r\n    return(\r\n        <div id={\"calculator\"}>\r\n            CATAN'S CALCULATOR WITHOUT REDUX\r\n            <Provider>\r\n                <Display/>\r\n                <div id=\"buttons\">\r\n                    <div>\r\n                        <Button index={15}/>\r\n                        <Button index={16}/>\r\n                        <Button index={17}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={7}/>\r\n                        <Button index={8}/>\r\n                        <Button index={9}/>\r\n                        <Button index={11}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={4}/>\r\n                        <Button index={5}/>\r\n                        <Button index={6}/>\r\n                        <Button index={12}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={1}/>\r\n                        <Button index={2}/>\r\n                        <Button index={3}/>\r\n                        <Button index={13}/>\r\n                    </div>\r\n                    <div>\r\n                        <Button index={0}/>\r\n                        <Button index={10}/>\r\n                        <Button index={14}/>\r\n                    </div>\r\n                </div>\r\n            </Provider>\r\n        </div>\r\n    )\r\n}\r\n\r\nReactDom.render(\r\n    <Calculator/>,\r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}